# 音声日記アプリケーション TODO

## データベース・バックエンド
- [x] データベーススキーマの設計（録音履歴、Notion同期状態）
- [x] 音声ファイルをS3にアップロードするAPI
- [x] Whisper APIを使用した音声テキスト変換API
- [x] Notionデータベースへの自動保存API
- [x] 日記エントリー一覧取得API（Notionから取得）
- [x] エラーハンドリングとリトライロジック

## フロントエンド・デザイン
- [x] エディトリアルデザインシステムの構築（クリーム背景、Didoneセリフ体）
- [x] グローバルテーマとタイポグラフィの設定
- [x] ブラウザ音声録音機能の実装（MediaRecorder API）
- [x] 録音UI（開始/停止ボタン、録音時間表示）
- [x] 録音中の視覚的フィードバック（波形またはアニメーション）
- [x] タグ選択UI（複数選択可能なチェックボックス）
- [x] 日記エントリー一覧表示画面
- [x] ローディング状態とエラー通知の実装

## 統合・テスト
- [x] 音声録音→S3アップロード→テキスト変換→Notion保存の統合フロー
- [x] エラーケースのテスト（録音失敗、変換失敗、Notion保存失敗）
- [x] ブラウザ互換性テスト（Chrome、Safari、Firefox）
- [x] レスポンシブデザインの確認
- [x] Vitest単体テストの作成

## デプロイ・ドキュメント
- [x] チェックポイント作成
- [x] 使用方法ドキュメントの作成

## バグ修正
- [x] Notionタグプロパティの形式を修正（JSON文字列形式に変更）

## 新機能追加
- [x] LLMを使用した音声テキストの箇条書き整理機能
- [x] 整理されたテキストのプレビュー表示

## 高度な機能追加
- [x] 音声入力から日付を自動抽出する機能
- [x] 同じ日付の既存日記とマージする機能
- [x] 音声内容からタグを自動推測する機能
- [x] Notionから既存日記を検索・取得する機能

## バグ修正2
- [x] 日付解析エラーの修正（Invalid time value）

## バグ修正3
- [x] Notion更新API（notion-update-page）の引数形式を修正

## バグ修正4
- [x] シェルコマンドのエスケープ処理を修正（JSON入力の特殊文字対応）

## バグ修正5
- [x] 日付とタイトルの不一致を修正
- [x] LLMの応答から不要なヘッダー情報を除去
